(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{367:function(t,n,s){"use strict";s.r(n);var a=s(18),e=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"_4-3-网络模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-网络模块"}},[t._v("#")]),t._v(" 4.3 网络模块")]),t._v(" "),n("h2",{attrs:{id:"基本介绍-network-introduction"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本介绍-network-introduction"}},[t._v("#")]),t._v(" 基本介绍 {#network-introduction}")]),t._v(" "),n("p",[t._v("网络模块（network）作为网关服（gate）和测试客户端（client）的核心模块，主要负责为各种客户端提供连接和通信支持。目前框架已提供了 "),n("a",{attrs:{href:"https://github.com/dobyte/due/tree/main/network/tcp",target:"_blank",rel:"noopener noreferrer"}},[t._v("TCP"),n("OutboundLink")],1),t._v("、"),n("a",{attrs:{href:"https://github.com/dobyte/due/tree/main/network/kcp",target:"_blank",rel:"noopener noreferrer"}},[t._v("KCP"),n("OutboundLink")],1),t._v("、"),n("a",{attrs:{href:"https://github.com/dobyte/due/tree/main/network/ws",target:"_blank",rel:"noopener noreferrer"}},[t._v("WS"),n("OutboundLink")],1),t._v(" 三种常用的网络层支持。你可以根据自生业务需要来选择合适的网络模块，也可以根据框架的网络层接口来实现自己的网络模块。")]),t._v(" "),n("h2",{attrs:{id:"网络服务器示例-network-server-example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络服务器示例-network-server-example"}},[t._v("#")]),t._v(" 网络服务器示例 {#network-server-example}")]),t._v(" "),n("p",[t._v("网络服务器主要作为网关服（gate）的网络模块而存在，这里就不再做相关示例的文档说明，如需了解如何使用可以移步"),n("RouterLink",{attrs:{to:"/guide/gate.html#示例代码-gate-example"}},[t._v("网关服务器")])],1),t._v(" "),n("h2",{attrs:{id:"自定义网络服务器-network-custom-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义网络服务器-network-custom-server"}},[t._v("#")]),t._v(" 自定义网络服务器 {#network-custom-server}")]),t._v(" "),n("p",[t._v("如果你想在自己的业务中使用自定义的网络服务器，你可以通过实现以下接口来构建一个属于自己的网络服务器库，然后应用到自己的网关服（gate）上。")]),t._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tStartHandler      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tCloseHandler      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tConnectHandler    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conn Conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tDisconnectHandler "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conn Conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tReceiveHandler    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conn Conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("byte")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Server "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Addr 监听地址")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Addr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Start 启动服务器")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Stop 关闭服务器")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Stop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Protocol 协议")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Protocol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnStart 监听服务器启动")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnStart")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler StartHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnStop 监听服务器关闭")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnStop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler CloseHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnConnect 监听连接打开")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnConnect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler ConnectHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnReceive 监听接收消息")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnReceive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler ReceiveHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnDisconnect 监听连接断开")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnDisconnect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler DisconnectHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br")])]),n("h2",{attrs:{id:"网络客户端示例-network-client-example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络客户端示例-network-client-example"}},[t._v("#")]),t._v(" 网络客户端示例 {#network-client-example}")]),t._v(" "),n("p",[t._v("网络客户端主要作为测试客户端（client）的网络模块而存在，这里就不再做相关示例的文档说明，如需了解如何使用可以移步"),n("RouterLink",{attrs:{to:"/guide/client.html#示例代码-client-example"}},[t._v("测试客户端")])],1),t._v(" "),n("h2",{attrs:{id:"自定义网络客户端-network-custom-client"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义网络客户端-network-custom-client"}},[t._v("#")]),t._v(" 自定义网络客户端 {#network-custom-client}")]),t._v(" "),n("p",[t._v("如果你想在自己的业务中使用自定义的网络客户端，你可以通过实现以下接口来构建一个属于自己的网络客户端库，然后应用到自己的测试客户端（client）上。")]),t._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Client "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Dial 拨号连接")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Dial")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Protocol 协议")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Protocol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnConnect 监听连接打开")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnConnect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler ConnectHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnReceive 监听接收消息")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnReceive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler ReceiveHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OnDisconnect 监听连接断开")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnDisconnect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler DisconnectHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);